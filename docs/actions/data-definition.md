[<- Back](../README.md)

# Data Definition

## Defining the databse
For consistency we force the InnoDB engine with UTF8 encoding.
We may make this adjustable in future but learning from related projects in other programming languages,
for now, it's the most reliable way to go.

## Defining models (database tables)
What we reference as "Table" within the database is nothing else than a "class" within C#.
Jet both terms do not describe what we would like to represent which is why we will reference them as "models".

To create a model we require the `Model` attribute.
A valid implementation with would look like this:
```
[Model]
class Contact {}  // Creates the table "contact"
```

Available `Model` properties are:
* Table (string, optional)
  * Provide a table name, by default the table name is auto-generated by the class name.
* OrderBy (string, optional)
  * Field by which queries are ordered by, i.e. `"Id DESC"`.

### Notes
* Models require atleast 1 Field before being created.
* Take a look at [model templates](../hints/model-template.md) which include important functionality by default.

## Defining fields (table columns)
What we reference as "Column" within a database table or a class property within C# is referenced as model `Field`.
```
[Model]
class Contact {

    // Required DateTime Column
    [Field(Required=true)]
    public DateTime BuildDate { get; private set; }

    // Unsigned, Unique, Auto-Increment Integer
    [Field(
        AutoIncrement=true,
        Unique=true
    )]
    public uint Serial { get; private set; }

}
```
Available `Field` properties are:
* AutoIncrement (bool, optional, default=false)
    * Automatically increment value upwards by 1 on insert. Only compatible with int related data types.
* Column (string, optional)
    * Provide a column name, by default the column name is auto-generated by the property name.
* Decimal (uint, optional, default=2)
    * How many positions should be reserved after the decimal point. Works with decimal, float and single data type.
* PrimaryKey (bool, optional, default=false)
    * Used to identify the column - datatype must be related to int (uint, bigint, etc.)
    * Forces Unique constraint (DB limitations)
    * While a table can only have one primary key, the key can consist of multiple columns. Those however must stay unique in their value combinations.
    * Take a look at [best practices](../hints/best-practice.md)!
* Required (bool, optional, default=false)
    * If true, field must be set or the insert will fail.
* Size (uint, optional)
    *  How much space should be reserved for the column value, default decided by database.
* Unique (bool, optional, default=false)
    * Sets an unique constraint and prevents an assigned value to appear twice in the same column.
* Writeable (bool, optional, default=true)
    * If false, the field can only be set while the record is being created. Any further changes will be ignored.
